<html>
<meta name="robots" content="noindex">
<meta name="viewport" content="width=device-width, initial-scale=5.0, maximum-scale=1.0, shrink-to-fit=no">

<head>
    <title><!--Sitename--> - /<!--PathArrayStart--><!--PathArrayName-->/<!--PathArrayEnd--></title>
    <script>
      function showFile(url) {
        var ext = url.split('.').pop().toLowerCase();
        var imageTypes = ['jpg', 'jpeg', 'png', 'gif', 'bmp'];
        var textTypes = ['txt'];
        
        if (imageTypes.includes(ext)) {
          var w = window.open("", "_blank");
          w.document.write(`
            <html>
              <head>
                <title>Image Preview</title>
                <style>
                  body {
                    margin: 0;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                  }
                  @media (prefers-color-scheme: dark) {
                    body {
                      background-color: #121212;
                    }
                  }
                  @media (prefers-color-scheme: light) {
                    body {
                      background-color: #fff;
                    }
                  }
                  img {
                    max-width: 100%;
                    max-height: 100%;
                  }
                </style>
              </head>
              <body>
                <img src='${url}' />
              </body>
            </html>
          `);
          w.document.close();
          return false; // 阻止默认行为
        } else if (textTypes.includes(ext)) {
          fetch(url)
            .then(response => response.text())
            .then(data => {
              var w = window.open("", "_blank");
              w.document.write(`
                <html>
                  <head>
                    <title>Text Preview</title>
                    <style>
                      body {
                        margin: 0;
                        padding: 20px;
                        font-family: monospace;
                        background-color: #fff;
                        color: #000;
                        white-space: pre-wrap;
                      }
                    </style>
                  </head>
                  <body>
                    <pre>${data}</pre>
                  </body>
                </html>
              `);
              w.document.close();
            });
          return false; // 阻止默认行为
        } else {
          return true; // 允许默认行为
        }
      }
    </script>
    <style>
      @media (prefers-color-scheme: dark) {
        body {
            background-color: #121212;
        }
        td {
            color: #f0f0f0;
        }
        h1 {
            color: #f0f0f0;
        }
        a {
            color: #9f9fff !important;
        }
      }
    </style>
</head>

<body>
    <h1><!--Sitename--> - /<!--DiskPathArrayStart--><!--PathArrayName-->/<!--PathArrayEnd--></h1>
    <hr>
    <table>
        <!--BackArrowStart-->
        <tr>
            <td colspan="3"><a href="<!--BackArrowUrl-->">../</a></td>
        </tr>
        <!--BackArrowEnd--><!--ListStart--><!--IsFolderStart--><!--FolderListStart-->
        <tr>
            <td><a href="<!--FileEncodeReplaceUrl-->/"> <!--FileEncodeReplaceName--> /</a></td>
            <td align="right"><!--lastModifiedDateTime--></td>
            <td align="right">-</td>
        </tr>
        <!--FolderListEnd--><!--FileListStart-->
        <tr>
            <td><a href="<!--FileEncodeReplaceUrl-->" onclick="return showFile(this.href);"><!--FileEncodeReplaceName--></a></td>
            <td align="right"><!--lastModifiedDateTime--></td>
            <td align="right"><!--size--></td>
        </tr>
        <!--FileListEnd--><!--IsFolderEnd--><!--ListEnd-->
    </table>
    <hr>
</body>

</html>
